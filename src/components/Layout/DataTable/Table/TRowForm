import React from "react";
import { TableCell } from "@material-ui/core";
import { PassUpdate, Config } from "../EditableDataTable";
import { getKeys } from "../util";

export interface Props<T> {
  config: Config<T>;
  data: T;
  onChange: PassUpdate<T>;
  renderOptions?: () => JSX.Element;
}

export interface InputProps<T, A, N> {
  value: T;
  name: N;
  onChange: PassUpdate<A>;
}

function TRowForm<T>({ config, data, onChange, renderOptions }: Props<T>) {
  return (
    <>
      {getKeys(config)
        .sort((key) => config[key].index)
        .map((key) => (
          <TableCell>
            {config[key].renderInput({
              onChange,
              name: key,
              value: data[key],
            })}
          </TableCell>
        ))}
      {renderOptions && renderOptions()}
    </>
  );
}

export default TRowForm;
